"use strict";(self.webpackChunkTrello_Clone=self.webpackChunkTrello_Clone||[]).push([[984],{8984:(bn,f,c)=>{c.r(f),c.d(f,{PublicBoardsModule:()=>pn});var d=c(6895),g=c(7799),a=c(4006),u=c(1206),w=c(9471),l=c(590),b=c(4241),n=c(4650),k=c(3385),M=c(9325),B=c(7247),O=c(6202),C=c(5004),T=c(4451),I=c(3164),P=c(3336),x=c(9549),v=c(284),h=c(9101),m=c(9022),Z=c(4883);const N=["columnNameInput"];function y(e,r){1&e&&(n.TgZ(0,"span",14),n._uU(1,"+"),n.qZA())}function U(e,r){1&e&&n._UZ(0,"span",15)}function A(e,r){if(1&e&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.hij(" ",t.username.value," already invited. ")}}function F(e,r){1&e&&(n.TgZ(0,"mat-error")(1,"span"),n._uU(2,"This user does not exist"),n.qZA()())}function J(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"li")(1,"p"),n._uU(2),n.qZA(),n.TgZ(3,"button",18),n.NdJ("click",function(){const s=n.CHM(t).index,_=n.oxw(3);return n.KtG(_.deleteInvitedUser(s))}),n.TgZ(4,"p")(5,"mat-icon"),n._uU(6,"close"),n.qZA()()()()}if(2&e){const t=r.$implicit;n.xp6(2),n.hij("- ",t,"")}}function S(e,r){if(1&e&&(n.TgZ(0,"div",6)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),n._uU(5," List of users "),n.qZA()(),n.TgZ(6,"ul",16),n.YNc(7,J,7,1,"li",17),n.qZA()()()()),2&e){const t=n.oxw(2);n.xp6(7),n.Q6J("ngForOf",t.invitedUsersNames)}}function E(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"div",5)(1,"div",6)(2,"mat-accordion")(3,"mat-expansion-panel")(4,"mat-expansion-panel-header")(5,"mat-panel-title"),n._uU(6," Invite user "),n.qZA()(),n.TgZ(7,"div",7),n._UZ(8,"input",8),n.TgZ(9,"button",9),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.inviteUserToBoard())}),n.ALo(10,"async"),n.YNc(11,y,2,0,"span",10),n.ALo(12,"async"),n.YNc(13,U,1,0,"span",11),n.ALo(14,"async"),n.qZA()(),n.YNc(15,A,2,1,"mat-error",12),n.YNc(16,F,3,0,"mat-error",12),n.qZA()()(),n.YNc(17,S,8,1,"div",13),n.qZA()}if(2&e){const t=n.oxw();n.xp6(8),n.Q6J("formControl",t.username),n.xp6(1),n.Q6J("disabled",t.username.invalid||(null==t.currentBoard.invitedUsers?null:t.currentBoard.invitedUsers.includes(t.username.value))||n.lcZ(10,7,t.asyncValidatorService._isCheckDataBase)),n.xp6(2),n.Q6J("ngIf",!n.lcZ(12,9,t.asyncValidatorService._isCheckDataBase)||t.username.invalid),n.xp6(2),n.Q6J("ngIf",n.lcZ(14,11,t.asyncValidatorService._isCheckDataBase)&&!t.username.invalid),n.xp6(2),n.Q6J("ngIf",null==t.currentBoard.invitedUsers?null:t.currentBoard.invitedUsers.includes(t.username.value)),n.xp6(1),n.Q6J("ngIf",null==t.username.errors?null:t.username.errors.userDoNotExist),n.xp6(1),n.Q6J("ngIf",null==t.currentBoard||null==t.currentBoard.invitedUsers?null:t.currentBoard.invitedUsers.length)}}function Q(e,r){if(1&e&&(n.TgZ(0,"p",31),n._uU(1),n.qZA()),2&e){const t=n.oxw().$implicit;n.xp6(1),n.Oqu(t.name)}}function D(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"p",32),n.NdJ("click",function(){n.CHM(t);const i=n.oxw().index,s=n.oxw();return n.KtG(s.updateColumnName(i))}),n._uU(1),n.qZA()}if(2&e){const t=n.oxw().$implicit;n.xp6(1),n.hij(" ",t.name," ")}}function Y(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"div",33),n.NdJ("mousedown",function(i){return i.stopPropagation()}),n.TgZ(1,"input",34,35),n.NdJ("ngModelChange",function(i){n.CHM(t);const s=n.oxw().$implicit;return n.KtG(s.name=i)})("keydown.enter",function(){n.CHM(t);const i=n.oxw().index,s=n.oxw();return n.KtG(s.updateColumnName(i))})("keydown.escape",function(){n.CHM(t);const i=n.oxw(2);return n.KtG(i.isEditable=!1)}),n.qZA(),n.TgZ(3,"button",36),n.NdJ("click",function(){n.CHM(t);const i=n.oxw().index,s=n.oxw();return n.KtG(s.updateColumnName(i))}),n._uU(4," + "),n.qZA()()}if(2&e){const t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngModel",t.name)}}function H(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"button",37),n.NdJ("click",function(){n.CHM(t);const i=n.oxw().index,s=n.oxw();return n.KtG(s.deleteColumn(i))}),n._uU(1," X "),n.qZA()}}function q(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"button",41),n.NdJ("click",function(i){n.CHM(t);const s=n.oxw().index,_=n.oxw().index;return n.oxw().deleteTask(s,_),n.KtG(i.stopPropagation())}),n._uU(1,"X"),n.qZA()}}function G(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"div",38)(1,"a",39),n.NdJ("click",function(){const s=n.CHM(t).index,_=n.oxw().index,p=n.oxw();return n.KtG(p.openTaskWindow(s,_))}),n._uU(2),n.YNc(3,q,2,0,"button",40),n.qZA()()}if(2&e){const t=r.$implicit,o=n.oxw(2);n.xp6(2),n.hij("",t.name," "),n.xp6(1),n.Q6J("ngIf",o.isOwner)}}function K(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"form",42),n.NdJ("ngSubmit",function(){n.CHM(t);const i=n.oxw().index,s=n.oxw();return n.KtG(s.addNewTask(i))}),n._UZ(1,"input",43),n.TgZ(2,"button",44),n._uU(3," + "),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(1),n.Q6J("formControl",t.taskName),n.xp6(1),n.Q6J("disabled",t.taskName.invalid)}}function L(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"a",39),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2).index,s=n.oxw();return n.KtG(s.openTaskForm(i))}),n.TgZ(1,"span"),n._uU(2,"+"),n.qZA(),n._uU(3,"\xa0"),n.TgZ(4,"span"),n._uU(5,"Add new task"),n.qZA()()}}function z(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"a",39,47),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2).index,s=n.oxw();return n.KtG(s.openTaskForm(i))}),n._uU(2,"\xa0\xa0"),n.TgZ(3,"span"),n._uU(4,"Cancel adding new task"),n.qZA()()}}function j(e,r){if(1&e&&(n.TgZ(0,"div",45),n.YNc(1,L,6,0,"a",46),n.YNc(2,z,5,0,"ng-template",null,47,n.W1O),n.qZA()),2&e){const t=n.MAs(3),o=n.oxw().index,i=n.oxw();n.xp6(1),n.Q6J("ngIf",!i.addNewTaskToggle||o!==i.viewTaskFormIndex)("ngIfElse",t)}}function W(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),n.YNc(4,Q,2,1,"p",23),n.YNc(5,D,2,1,"p",24),n.YNc(6,Y,5,1,"div",25),n.YNc(7,H,2,0,"button",26),n.qZA(),n._UZ(8,"hr"),n.TgZ(9,"div",27),n.NdJ("cdkDropListDropped",function(i){const _=n.CHM(t).index,p=n.oxw();return n.KtG(p.dropTask(i,_))}),n.YNc(10,G,4,2,"div",28),n.qZA(),n.YNc(11,K,4,2,"form",29),n.YNc(12,j,4,2,"div",30),n.qZA()()()}if(2&e){const t=r.$implicit,o=r.index,i=n.oxw();n.xp6(4),n.Q6J("ngIf",!i.isOwner),n.xp6(1),n.Q6J("ngIf",(!i.isEditable||o!==i.viewColumnNameFormIndex)&&i.isOwner),n.xp6(1),n.Q6J("ngIf",i.isEditable&&o===i.viewColumnNameFormIndex&&i.isOwner),n.xp6(1),n.Q6J("ngIf",!i.isEditable&&i.isOwner),n.xp6(2),n.Q6J("cdkDropListData",t.tasks),n.xp6(1),n.Q6J("ngForOf",null==t?null:t.tasks),n.xp6(1),n.Q6J("ngIf",i.addNewTaskToggle&&o===i.viewTaskFormIndex),n.xp6(1),n.Q6J("ngIf",i.isOwner)}}function $(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"div",51)(1,"a",39),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2);return n.KtG(i.openColumnForm())}),n.TgZ(2,"span"),n._uU(3,"+"),n.qZA(),n._uU(4,"\xa0"),n.TgZ(5,"span"),n._uU(6,"Add new column"),n.qZA()()()}}function V(e,r){1&e&&(n.TgZ(0,"mat-error"),n._uU(1," Name is "),n.TgZ(2,"span"),n._uU(3,"required"),n.qZA()())}function R(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"form",52),n.NdJ("ngSubmit",function(){n.CHM(t);const i=n.oxw(2);return n.KtG(i.addNewColumn())}),n.TgZ(1,"mat-form-field",53)(2,"mat-label"),n._uU(3,"Column name"),n.qZA(),n._UZ(4,"input",54),n.YNc(5,V,4,0,"mat-error",12),n.qZA(),n.TgZ(6,"div",55)(7,"button",56),n._uU(8," Create "),n.qZA(),n.TgZ(9,"button",57),n.NdJ("click",function(){n.CHM(t);const i=n.oxw(2);return n.KtG(i.cancelAddingColumn())}),n._uU(10," Cancel "),n.qZA()()()}if(2&e){const t=n.oxw(2);n.xp6(4),n.Q6J("formControl",t.columnName),n.xp6(1),n.Q6J("ngIf",t.columnName.hasError("required")),n.xp6(2),n.Q6J("disabled",t.columnName.invalid)}}function X(e,r){if(1&e&&(n.TgZ(0,"div",48),n.YNc(1,$,7,0,"div",49),n.YNc(2,R,11,3,"ng-template",null,50,n.W1O),n.qZA()),2&e){const t=n.MAs(3),o=n.oxw();n.xp6(1),n.Q6J("ngIf",!o.addNewColumnToggle)("ngIfElse",t)}}const nn=function(e){return{"padding-top":e}};let tn=(()=>{class e{constructor(t,o,i,s,_,p,mn,gn){this.afAuth=t,this.boardFirebaseService=o,this.asyncValidatorService=i,this.currentUserService=s,this.route=_,this.dialog=p,this.currentDataService=mn,this.userFirebaseService=gn,this.addNewTaskToggle=!1,this.addNewColumnToggle=!1,this.isEditable=!1,this.invitedUsersNames=[],this.columnName=new a.NI("",[a.kI.required]),this.taskName=new a.NI("",[a.kI.required]),this.username=new a.NI("",[a.kI.required],[this.asyncValidatorService.usernameExistValidator("invite")])}ngOnInit(){this.route.params.pipe((0,l.P)()).subscribe(t=>this.boardId=t.id),this.afAuth.user.pipe((0,l.P)()).subscribe(t=>{t&&(this.uid=t.uid)}),this.boardFirebaseService.getPublicBoard(this.boardId).pipe((0,l.P)()).subscribe(t=>{t?(this.currentBoard=t,this.isOwner=this.uid===this.currentBoard.ownerId,this.currentBoard.invitedUsers?.map(o=>this.userFirebaseService.getUserDocById(o).pipe((0,l.P)()).subscribe(i=>this.invitedUsersNames.push(i.username)))):console.log("Something goes wrong")})}openColumnForm(){this.addNewColumnToggle=!this.addNewColumnToggle}addNewColumn(){this.currentBoard.columns?.push({columnId:this.currentBoard.columns.length,name:this.columnName.value,tasks:[]}),this.boardFirebaseService.updatePublicBoard(this.boardId,{columns:this.currentBoard.columns}),this.addNewColumnToggle=!this.addNewColumnToggle,this.columnName.reset()}cancelAddingColumn(){this.addNewColumnToggle=!this.addNewColumnToggle,this.columnName.reset()}updateColumnName(t){this.isEditable=!this.isEditable,this.viewColumnNameFormIndex=t,this.isEditable?setTimeout(()=>(console.log(this._inputElement.nativeElement.value),this._inputElement.nativeElement.focus()),25):this.currentBoard.columns?.[t].name?.length>=3?this.boardFirebaseService.updatePublicBoard(this.currentBoard.boardId,{columns:this.currentBoard.columns}):(alert("Names with less than 3 char didn't saving."),this.boardFirebaseService.getPublicBoard(this.boardId).pipe((0,l.P)()).subscribe(o=>{o?this.currentBoard=o:console.log("Something goes wrong")}))}dropColumn(t){t.isPointerOverContainer&&(this.openTaskForm(),this.isEditable=!1),this.isOwner&&((0,u.bA)(this.currentBoard.columns,t.previousIndex,t.currentIndex),this.boardFirebaseService.updatePublicBoard(this.boardId,{columns:this.currentBoard.columns}))}dropTask(t,o){this.isOwner&&(t.previousContainer===t.container?(0,u.bA)(this.currentBoard.columns?.[o].tasks,t.previousIndex,t.currentIndex):(0,u.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.boardFirebaseService.updatePublicBoard(this.boardId,this.currentBoard))}openTaskForm(t){this.addNewTaskToggle=!this.addNewTaskToggle,this.viewTaskFormIndex=t,this.taskName.reset()}addNewTask(t){this.currentBoard.columns?.[t].tasks?.push({taskId:this.currentBoard.columns?.[t].tasks?.length,name:this.taskName.value,text:"",assignedUsers:[],comments:[]}),this.boardFirebaseService.updatePublicBoard(this.boardId,{columns:this.currentBoard.columns}),this.addNewTaskToggle=!this.addNewTaskToggle,this.taskName.reset()}openTaskWindow(t,o){this.currentDataService.changeBehaviorSubjectValue(this.currentDataService._currentBoard,this.currentBoard),this.currentDataService.changeBehaviorSubjectValue(this.currentDataService._currentColumn,this.currentBoard.columns?.[o]),this.currentDataService.changeBehaviorSubjectValue(this.currentDataService._currentTask,this.currentBoard.columns?.[o].tasks?.[t]),this.dialog.open(w.H,{width:"95vw",height:"90vh",maxWidth:"95vw",autoFocus:!1})}inviteUserToBoard(){this.userFirebaseService.getUserWhere("username","==",this.username.value).pipe((0,l.P)()).subscribe(t=>{this.currentBoard.invitedUsers?.push(t[0].uid),this.boardFirebaseService.updatePublicBoard(this.boardId,{invitedUsers:this.currentBoard.invitedUsers})}),this.invitedUsersNames.push(this.username.value),this.username.reset()}deleteInvitedUser(t){this.invitedUsersNames.splice(t,1),this.currentBoard.invitedUsers?.splice(t,1),this.boardFirebaseService.updatePublicBoard(this.boardId,this.currentBoard)}deleteColumn(t){this.dialog.open(b.z,{data:{text:"Are you sure you want to delete this list?",subtext:"All tasks inside will be deleted to"}}).afterClosed().pipe((0,l.P)()).subscribe(o=>{o&&(this.currentBoard.columns?.splice(t,1),this.boardFirebaseService.updatePublicBoard(this.boardId,{columns:this.currentBoard.columns}))})}deleteTask(t,o){this.dialog.open(b.z,{data:{text:"Are you sure you want to delete this task?",subtext:"All information inside will be deleted"}}).afterClosed().pipe((0,l.P)()).subscribe(i=>{i&&(this.currentBoard.columns?.[o].tasks?.splice(t,1),this.boardFirebaseService.updatePublicBoard(this.boardId,{columns:this.currentBoard.columns}))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(k.zQ),n.Y36(M.U),n.Y36(B.n),n.Y36(O.S),n.Y36(g.gz),n.Y36(C.uw),n.Y36(T.R),n.Y36(I.e))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-board"]],viewQuery:function(t,o){if(1&t&&n.Gf(N,5),2&t){let i;n.iGM(i=n.CRH())&&(o._inputElement=i.first)}},decls:5,vars:6,consts:[["class","buttons-panel",4,"ngIf"],["cdkScrollable","","cdkDropList","","cdkDropListOrientation","horizontal",1,"columns",3,"ngStyle","cdkDropListDropped"],["cdkDropListGroup",""],["class","columns__column",4,"ngFor","ngForOf"],["class","columns__add-new",4,"ngIf"],[1,"buttons-panel"],[1,"buttons-panel__button"],[1,"input-group"],["placeholder","username",1,"form-control","shadow-none",3,"formControl"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","plus",4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],[4,"ngIf"],["class","buttons-panel__button",4,"ngIf"],[1,"plus"],[1,"spinner-border","spinner-border-sm"],[1,"users-list"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],[1,"columns__column"],["cdkDrag","",1,"list-wrapper"],[1,"list-wrapper__list"],[1,"list-wrapper__list__header","d-flex","flex-row"],["class","title",4,"ngIf"],["class","title",3,"click",4,"ngIf"],["class","input-group",3,"mousedown",4,"ngIf"],["mat-raised-button","","color","warn","class","delete-button ms-auto",3,"click",4,"ngIf"],["cdkDropList","",1,"task-placeholder",3,"cdkDropListData","cdkDropListDropped"],["class","list-wrapper__list__task","cdkDrag","",4,"ngFor","ngForOf"],["class","list-wrapper__list__form",3,"ngSubmit",4,"ngIf"],["class","list-wrapper__task-composer",4,"ngIf"],[1,"title"],[1,"title",3,"click"],[1,"input-group",3,"mousedown"],["type","text","maxlength","15",1,"form-control",3,"ngModel","ngModelChange","keydown.enter","keydown.escape"],["columnNameInput",""],["mat-raised-button","","color","primary",1,"add-button","rounded",3,"click"],["mat-raised-button","","color","warn",1,"delete-button","ms-auto",3,"click"],["cdkDrag","",1,"list-wrapper__list__task"],[3,"click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],[1,"list-wrapper__list__form",3,"ngSubmit"],["placeholder","name","maxlength","15",3,"formControl"],["mat-button","","color","primary","type","submit",3,"disabled"],[1,"list-wrapper__task-composer"],[3,"click",4,"ngIf","ngIfElse"],["cancel",""],[1,"columns__add-new"],["class","columns__add-new__column-btn",4,"ngIf","ngIfElse"],["form",""],[1,"columns__add-new__column-btn"],[1,"columns__add-new__column-form",3,"ngSubmit"],["appearance","outline"],["matInput","","type","text","maxlength","15",3,"formControl"],[1,"columns__add-new__column-form__buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","type","button",3,"click"]],template:function(t,o){1&t&&(n.YNc(0,E,18,13,"div",0),n.TgZ(1,"div",1),n.NdJ("cdkDropListDropped",function(s){return o.dropColumn(s)}),n.TgZ(2,"div",2),n.YNc(3,W,13,8,"div",3),n.YNc(4,X,4,2,"div",4),n.qZA()()),2&t&&(n.Q6J("ngIf",o.isOwner),n.xp6(1),n.Q6J("ngStyle",n.VKq(4,nn,o.isOwner?"4em":"1em")),n.xp6(2),n.Q6J("ngForOf",null==o.currentBoard?null:o.currentBoard.columns),n.xp6(1),n.Q6J("ngIf",o.isOwner))},dependencies:[d.sg,d.O5,d.PC,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.On,a.F,P.Hw,a.oH,x.TO,x.KE,x.hX,v.Nt,h.lW,m.pp,m.ib,m.yz,m.yK,Z.PQ,u.Wj,u.Fd,u.Zt,d.Ov],styles:["@keyframes fadeIn{to{opacity:1}}.columns[_ngcontent-%COMP%]{height:87vh;overflow-x:auto;white-space:nowrap;padding:4em .5em 0}.columns[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{min-width:32px}.columns[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{opacity:0}.columns[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{animation:fadeIn 1s forwards}.columns[_ngcontent-%COMP%]   .columns__column[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]{display:inline-block;margin:0 4px;vertical-align:top;height:100%;border-radius:3px}.columns[_ngcontent-%COMP%]   .columns__column[_ngcontent-%COMP%]   .columns__add-new__column-btn[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]   .columns__add-new__column-btn[_ngcontent-%COMP%]{background-color:#ebecf0;border-radius:3px}.columns[_ngcontent-%COMP%]   .columns__column[_ngcontent-%COMP%]   .columns__add-new__column-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]   .columns__add-new__column-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;cursor:pointer;color:#5e6c84;flex:1 0 auto;padding:6px 16px}.columns[_ngcontent-%COMP%]   .columns__column[_ngcontent-%COMP%]   .columns__add-new__column-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]   .columns__add-new__column-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#5e6c841a;border-radius:3px}.columns[_ngcontent-%COMP%]   .columns__column[_ngcontent-%COMP%]   .columns__add-new__column-form[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]   .columns__add-new__column-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:.5rem;border:solid rgba(9,30,66,.0392156863) 2px;border-radius:3px;box-shadow:8px 10px 13px 2px #091e420a}.columns[_ngcontent-%COMP%]   .columns__column[_ngcontent-%COMP%]   .columns__add-new__column-form[_ngcontent-%COMP%]   .columns__add-new__column-form__buttons[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]   .columns__add-new__column-form[_ngcontent-%COMP%]   .columns__add-new__column-form__buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1em}.columns[_ngcontent-%COMP%]   .columns__add-new[_ngcontent-%COMP%]{margin:0 12px 0 4px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]{width:272px;display:flex;flex-direction:column;background-color:#ebecf0;max-height:100%;border-radius:3px;position:relative}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0 0 5px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .task-placeholder[_ngcontent-%COMP%]{min-height:1em}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]{flex:0 0 auto;min-height:20px;padding:2px 8px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600;padding:6px 8px;margin:0;vertical-align:center}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:3px;box-shadow:0 1px #091e4240;text-decoration:none;cursor:pointer;display:block;padding:4px 8px;margin:0 8px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#5e6c841a;border-radius:3px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;line-height:inherit;padding:0;min-width:24px;opacity:0}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__task[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{animation:fadeIn 1s forwards}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:4px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{min-width:30px;padding:0}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([disabled]){color:#fff;background-color:#3f51b5}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__list__form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([disabled]):hover{background-color:#3f51b5b3}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__task-composer[_ngcontent-%COMP%]{padding:0 8px 10px}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__task-composer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#5e6c84;flex:1 0 auto;cursor:pointer;padding:4px 8px;margin:2px 8px;text-decoration:none}.columns[_ngcontent-%COMP%]   .list-wrapper__list[_ngcontent-%COMP%]   .list-wrapper__task-composer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#5e6c841a;border-radius:3px}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%], .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#5e6c841a}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:#5e6c841a;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-preview[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:none}.buttons-panel[_ngcontent-%COMP%]{width:100%;height:58px;display:flex;background-color:#5e6c84;position:absolute;z-index:2}.buttons-panel[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{padding-left:4px;font-size:12px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]{margin-top:5px;margin-left:10px;width:300px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:20px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;min-width:36px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:22px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;background-color:#ebecf0;margin-bottom:2px;padding-left:8px}.buttons-panel[_ngcontent-%COMP%]   .buttons-panel__button[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media screen and (max-width: 990px){.columns[_ngcontent-%COMP%]{height:72vh}.buttons-panel__button[_ngcontent-%COMP%]{width:200px!important}}@media screen and (max-width: 400px){mat-error[_ngcontent-%COMP%]{padding-left:2px!important;font-size:9px!important}.buttons-panel__button[_ngcontent-%COMP%]{width:150px!important}}@media screen and (max-width: 300px){.columns[_ngcontent-%COMP%]{height:64vh}.list-wrapper__list[_ngcontent-%COMP%]{width:230px!important}.buttons-panel__button[_ngcontent-%COMP%]{width:100px!important}.buttons-panel__button[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:12px;height:12px!important}.buttons-panel__button[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px!important}.buttons-panel__button[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{font-size:12px!important;padding:0 6px}.buttons-panel__button[_ngcontent-%COMP%]     .mat-expansion-panel-body{font-size:12px;padding:0 4px 2px}}"]}),e})();var en=c(3159),on=c(3900);function rn(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"div",6)(1,"button",7),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.sortByUserBoards())}),n._uU(2," sort by your "),n.qZA(),n.TgZ(3,"button",7),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.sortByBoardsInvitedTo())}),n._uU(4," sort by invited to "),n.qZA(),n.TgZ(5,"button",7),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.sortByCreationTime())}),n._uU(6," sort by creation time "),n.qZA()()}}function sn(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(i){n.CHM(t);const s=n.oxw().index;return n.oxw().deleteBoard(s),i.stopPropagation(),n.KtG(i.preventDefault())}),n.TgZ(1,"mat-icon",12),n._uU(2,"close"),n.qZA()()}}const cn=function(e,r){return{owned:e,invited:r}},an=function(e,r){return[e,r]};function ln(e,r){if(1&e&&(n.TgZ(0,"li")(1,"div",8)(2,"a",9),n._uU(3),n.YNc(4,sn,3,0,"button",10),n.qZA()()()),2&e){const t=r.$implicit,o=n.oxw();n.xp6(1),n.Q6J("ngClass",n.WLB(4,cn,(null==t?null:t.ownerId)===o.uid,(null==t||null==t.invitedUsers?null:t.invitedUsers.includes(o.uid))&&(null==t?null:t.ownerId)!==o.uid)),n.xp6(1),n.Q6J("routerLink",n.WLB(7,an,t.name,t.boardId)),n.xp6(1),n.hij("",t.name," "),n.xp6(1),n.Q6J("ngIf",o.uid===(null==t?null:t.ownerId))}}function _n(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"li")(1,"div",13)(2,"a",14),n.NdJ("click",function(){n.CHM(t);const i=n.oxw();return n.KtG(i.openBoardModal())}),n._uU(3,"Create new board"),n.qZA()()()}}const dn=[{path:"",component:(()=>{class e{constructor(t,o,i){this.boardFirebaseService=t,this.currentUserService=o,this.dialog=i}ngOnInit(){this.currentUserService.currentUser$.pipe((0,l.P)()).subscribe(t=>this.currentUser=t),this.subscription=this.currentUserService.currentUser$.pipe((0,on.w)(t=>(t&&(this.uid=t.uid),this.boardFirebaseService.getSortedPublicBoards("boardId")))).subscribe(t=>{this.boards=t})}openBoardModal(){this.dialog.open(en.Z,{width:"300px",data:this.boards}).afterClosed().pipe((0,l.P)()).subscribe(o=>{o&&this.addBoard(o={boardId:this.boards.length>0?+this.boards[this.boards.length-1].boardId+1:1,isPublic:!0,ownerId:this.uid,name:o,columns:[],invitedUsers:[]})})}addBoard(t){this.boardFirebaseService.setPublicBoard(this.boards.length>0?+this.boards[this.boards.length-1].boardId+1:1,t)}deleteBoard(t){this.dialog.open(b.z,{data:{text:"Are you sure you want to delete this board?",subtext:"All columns and tasks inside will be deleted"}}).afterClosed().pipe((0,l.P)()).subscribe(o=>{o?this.boardFirebaseService.deletePublicBoard(this.boards[t].boardId):console.log("deleting cancelled")})}sortByCreationTime(){this.boards.sort((t,o)=>t.boardId>o.boardId?1:-1)}sortByUserBoards(){const t=[],o=[];this.boards.map(i=>this.uid===i.ownerId?t.push(i):o.push(i)),this.boards=t.concat(o)}sortByBoardsInvitedTo(){const t=[],o=[];this.boards.map(i=>i.invitedUsers?.includes(this.currentUser.uid)?t.push(i):o.push(i)),this.boards=t.concat(o)}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M.U),n.Y36(O.S),n.Y36(C.uw))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-public-boards"]],decls:10,vars:7,consts:[[1,"main-container"],["class","sort-buttons",4,"ngIf"],[1,"list-container"],[1,"boards-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"sort-buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"board-tile",3,"ngClass"],[3,"routerLink"],["class","close-button","mat-button","",3,"click",4,"ngIf"],["mat-button","",1,"close-button",3,"click"],[1,"close-icon"],[1,"board-tile","create-tile"],[3,"click"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0)(1,"h3"),n._uU(2,"Public Workspaces"),n.qZA(),n.YNc(3,rn,7,0,"div",1),n.ALo(4,"async"),n.TgZ(5,"div",2)(6,"ul",3),n.YNc(7,ln,5,10,"li",4),n.YNc(8,_n,4,0,"li",5),n.ALo(9,"async"),n.qZA()()()),2&t&&(n.xp6(3),n.Q6J("ngIf",n.lcZ(4,3,o.currentUserService.isUserLoggedIn$)),n.xp6(4),n.Q6J("ngForOf",o.boards),n.xp6(1),n.Q6J("ngIf",n.lcZ(9,5,o.currentUserService.isUserLoggedIn$)))},dependencies:[d.mk,d.sg,d.O5,g.yS,P.Hw,h.lW,d.Ov],styles:["@keyframes fadeIn{to{opacity:1}}.main-container[_ngcontent-%COMP%]{margin:2vw 2vw 0vw}.main-container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{margin:0 auto;max-width:1000px}.main-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#979292;text-align:center}.main-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:100%;font-weight:500;text-decoration:none;color:#000}.sort-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:1em;margin-bottom:1em}.sort-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:160px}.boards-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,max-content));grid-gap:15px;padding:initial;justify-content:center;list-style:none;margin:0;padding:0}.boards-list[_ngcontent-%COMP%]   .owned[_ngcontent-%COMP%]{background-image:url(website-background.69c7cf897e8bb12f.jpg)}.boards-list[_ngcontent-%COMP%]   .owned[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.boards-list[_ngcontent-%COMP%]   .invited[_ngcontent-%COMP%]{border:2px solid red}.board-tile[_ngcontent-%COMP%]{position:relative;background-image:url(blue-geometric-background.7fa365e61af5a8e5.jpg);background-size:cover;list-style-type:none;padding:5px;width:190px;height:80px;color:#fff;text-decoration:none;border-radius:3px;cursor:pointer;transition:transform .5s}.board-tile[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{height:24px;position:absolute;right:7px;padding:0;min-width:auto;opacity:0}.board-tile[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{vertical-align:inherit!important}.board-tile[_ngcontent-%COMP%]:hover{background-color:#00000026;transform:rotate(2deg)}.board-tile[_ngcontent-%COMP%]:hover   .close-button[_ngcontent-%COMP%]{animation:fadeIn 1s forwards}.create-tile[_ngcontent-%COMP%]{background-image:none;color:#172b4d;background-color:#091e420a}.create-tile[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;line-height:70px}"]}),e})()},{path:":boardName/:id",component:tn}];let un=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.Bz.forChild(dn),g.Bz]}),e})(),pn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[d.ez,un,a.u5,P.Ps,C.Is,a.UX,v.c,h.ot,m.To,u._t]}),e})()}}]);