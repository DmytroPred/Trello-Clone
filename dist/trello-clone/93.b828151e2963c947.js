"use strict";(self.webpackChunkTrello_Clone=self.webpackChunkTrello_Clone||[]).push([[93],{4451:(Y,I,h)=>{h.d(I,{R:()=>p});var c=h(1135),P=h(4650);let p=(()=>{class i{constructor(){this._currentBoard=new c.X({}),this._currentColumn=new c.X({}),this._currentTask=new c.X({})}changeBehaviorSubjectValue(C,m){C.next(m)}}return i.\u0275fac=function(C){return new(C||i)},i.\u0275prov=P.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},9325:(Y,I,h)=>{h.d(I,{U:()=>p});var c=h(4650),P=h(6185);let p=(()=>{class i{constructor(C){this.angularFirestore=C}getPrivateBoard(C,m){return this.angularFirestore.doc(`user/${C}/boards/board${m}`).valueChanges()}getPublicBoard(C){return this.angularFirestore.doc(`boards/board${C}`).valueChanges()}getSortedPrivateBoards(C,m){return this.angularFirestore.collection("user").doc(C).collection("boards",T=>T.orderBy(m)).valueChanges()}getSortedPublicBoards(C){return this.angularFirestore.collection("boards",m=>m.orderBy(C)).valueChanges()}setPrivateBoard(C,m,T){return this.angularFirestore.collection("user").doc(C).collection("boards").doc(`board${m}`).set(T)}setPublicBoard(C,m){return this.angularFirestore.collection("boards").doc(`board${C}`).set(m)}updatePrivateBoard(C,m,T){return this.angularFirestore.doc(`user/${C}/boards/board${m}`).update(T)}updatePublicBoard(C,m){return this.angularFirestore.doc(`boards/board${C}`).update(m)}deletePrivateBoard(C,m){return this.angularFirestore.doc(`user/${C}/boards/board${m}`).delete()}deletePublicBoard(C){return this.angularFirestore.doc(`boards/board${C}`).delete()}}return i.\u0275fac=function(C){return new(C||i)(c.LFG(P.ST))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},3159:(Y,I,h)=>{h.d(I,{Z:()=>W});var c=h(4006),P=h(5004),p=h(4650),i=h(6895),w=h(9549),C=h(284),m=h(9101);function T(M,R){1&M&&(p.TgZ(0,"mat-error"),p._uU(1," Name is "),p.TgZ(2,"strong"),p._uU(3,"required"),p.qZA()())}function J(M,R){1&M&&(p.TgZ(0,"mat-error",10)(1,"span"),p._uU(2,"Board already exist"),p.qZA()())}let W=(()=>{class M{constructor(E,O){this.dialogRef=E,this.boards=O,this.boardName=new c.NI("",[c.kI.required])}ngOnInit(){this.existBoardsNames=this.boards.map(E=>E.name)}addNewBoard(){this.dialogRef.close(this.boardName.value)}}return M.\u0275fac=function(E){return new(E||M)(p.Y36(P.so),p.Y36(P.WI))},M.\u0275cmp=p.Xpm({type:M,selectors:[["app-add-board-modal"]],decls:15,vars:4,consts:[[3,"ngSubmit"],["mat-dialog-title",""],[1,"container"],["appearance","outline",1,"container__name-form-field"],["matInput","","type","text","maxlength","15",3,"formControl"],[4,"ngIf"],["class","container__custom-error",4,"ngIf"],["align","end"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","mat-dialog-close",""],[1,"container__custom-error"]],template:function(E,O){1&E&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return O.addNewBoard()}),p.TgZ(1,"h2",1),p._uU(2,"Add new board"),p.qZA(),p.TgZ(3,"mat-dialog-content",2)(4,"mat-form-field",3)(5,"mat-label"),p._uU(6,"Name"),p.qZA(),p._UZ(7,"input",4),p.YNc(8,T,4,0,"mat-error",5),p.qZA(),p.YNc(9,J,3,0,"mat-error",6),p.qZA(),p.TgZ(10,"mat-dialog-actions",7)(11,"button",8),p._uU(12," Create "),p.qZA(),p.TgZ(13,"button",9),p._uU(14,"Cancel"),p.qZA()()()),2&E&&(p.xp6(7),p.Q6J("formControl",O.boardName),p.xp6(1),p.Q6J("ngIf",O.boardName.hasError("required")),p.xp6(1),p.Q6J("ngIf",O.existBoardsNames.includes(O.boardName.value)),p.xp6(2),p.Q6J("disabled",O.boardName.invalid||O.existBoardsNames.includes(O.boardName.value)))},dependencies:[i.O5,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.F,P.ZT,P.uh,P.xY,P.H8,c.oH,w.TO,w.KE,w.hX,C.Nt,m.lW],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.container__custom-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;font-size:12px}  .mat-form-field-infix{width:auto!important}"]}),M})()},4241:(Y,I,h)=>{h.d(I,{z:()=>i});var c=h(5004),P=h(4650),p=h(9101);let i=(()=>{class w{constructor(m){this.data=m}ngOnInit(){}}return w.\u0275fac=function(m){return new(m||w)(P.Y36(c.WI))},w.\u0275cmp=P.Xpm({type:w,selectors:[["app-confirmation-dialog"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["align","center"],["mat-raised-button","","color","warn",3,"mat-dialog-close"],["mat-raised-button","","mat-dialog-close",""]],template:function(m,T){1&m&&(P.TgZ(0,"mat-dialog-content")(1,"h2",0),P._uU(2),P.qZA(),P.TgZ(3,"p"),P._uU(4),P.qZA()(),P.TgZ(5,"mat-dialog-actions",1)(6,"button",2),P._uU(7,"Yes"),P.qZA(),P.TgZ(8,"button",3),P._uU(9,"No"),P.qZA()()),2&m&&(P.xp6(2),P.Oqu(T.data.text),P.xp6(2),P.Oqu(T.data.subtext),P.xp6(2),P.Q6J("mat-dialog-close",!0))},dependencies:[c.ZT,c.uh,c.xY,c.H8,p.lW],styles:["mat-dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red;font-weight:100;text-align:center}mat-dialog-actions[_ngcontent-%COMP%]{gap:1em}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:75px}"]}),w})()},9471:(Y,I,h)=>{h.d(I,{H:()=>K});var c=h(4006),P=h(590),p=h(5869),i=h(4650),w=h(7247),C=h(9325),m=h(3385),T=h(4451),J=h(6202),W=h(3164),M=h(6895),R=h(5004),E=h(9349),O=h(9549),L=h(9101),V=h(3336),U=h(9022),tt=h(7001),ht=h(2715);const gt=["taskInput"];function et(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"h2",19),i.NdJ("click",function(){i.CHM(l);const f=i.oxw();return i.KtG(f.updateTaskName())}),i._uU(1),i.qZA()}if(2&_){const l=i.oxw();i.xp6(1),i.hij(" ",l.selectedTask.name," ")}}function j(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"input",20,21),i.NdJ("keydown.enter",function(){i.CHM(l);const f=i.oxw();return i.KtG(f.updateTaskName())})("ngModelChange",function(f){i.CHM(l);const k=i.oxw();return i.KtG(k.selectedTask.name=f)}),i.qZA()}if(2&_){const l=i.oxw();i.Q6J("ngModel",l.selectedTask.name)}}function A(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"a",22),i.NdJ("click",function(){i.CHM(l);const f=i.oxw();return i.KtG(f.openCloseForm())}),i._uU(1,"Assign task"),i.qZA()}}function it(_,D){1&_&&(i.TgZ(0,"span",32),i._uU(1,"+"),i.qZA())}function H(_,D){1&_&&i._UZ(0,"span",33)}function nt(_,D){if(1&_&&(i.TgZ(0,"mat-error"),i._uU(1),i.qZA()),2&_){const l=i.oxw(3);i.xp6(1),i.hij(" ",l.assigningTaskForm.value," already assign. ")}}function pt(_,D){1&_&&(i.TgZ(0,"mat-error")(1,"span"),i._uU(2,"This user does not exist"),i.qZA()())}function Q(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"div",24)(1,"div",25),i._UZ(2,"input",26),i.TgZ(3,"button",27),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(2);return i.KtG(f.assignTask())}),i.ALo(4,"async"),i.YNc(5,it,2,0,"span",28),i.ALo(6,"async"),i.YNc(7,H,1,0,"span",29),i.ALo(8,"async"),i.qZA(),i.TgZ(9,"button",30),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(2);return i.KtG(f.openCloseForm())}),i.TgZ(10,"mat-icon",31),i._uU(11,"close"),i.qZA()()(),i.YNc(12,nt,2,1,"mat-error",10),i.YNc(13,pt,3,0,"mat-error",10),i.qZA()}if(2&_){const l=i.oxw(2);i.xp6(2),i.Q6J("formControl",l.assigningTaskForm),i.xp6(1),i.Q6J("disabled",l.assigningTaskForm.invalid||(null==l.selectedTask.assignedUsers?null:l.selectedTask.assignedUsers.includes(l.assigningTaskForm.value))||i.lcZ(4,6,l.asyncValidatorService._isCheckDataBase)),i.xp6(2),i.Q6J("ngIf",!i.lcZ(6,8,l.asyncValidatorService._isCheckDataBase)||l.assigningTaskForm.invalid),i.xp6(2),i.Q6J("ngIf",i.lcZ(8,10,l.asyncValidatorService._isCheckDataBase)&&!l.assigningTaskForm.invalid),i.xp6(5),i.Q6J("ngIf",null==l.selectedTask.assignedUsers?null:l.selectedTask.assignedUsers.includes(l.assigningTaskForm.value)),i.xp6(1),i.Q6J("ngIf",null==l.assigningTaskForm.errors?null:l.assigningTaskForm.errors.userDoNotExist)}}function $(_,D){if(1&_&&i.YNc(0,Q,14,12,"div",23),2&_){const l=i.oxw();i.Q6J("ngIf",l.isOwner)}}function q(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"button",37),i.NdJ("click",function(){i.CHM(l);const f=i.oxw().index,k=i.oxw(2);return i.KtG(k.deleteAssignedUser(f))}),i.TgZ(1,"p")(2,"mat-icon"),i._uU(3,"close"),i.qZA()()()}}function F(_,D){if(1&_&&(i.TgZ(0,"li")(1,"p"),i._uU(2),i.qZA(),i.YNc(3,q,4,0,"button",36),i.qZA()),2&_){const l=D.$implicit,u=i.oxw(2);i.xp6(2),i.Oqu(l),i.xp6(1),i.Q6J("ngIf",u.isOwner)}}function ot(_,D){if(1&_&&(i.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),i._uU(4," List of users "),i.qZA()(),i.TgZ(5,"ul",34),i.YNc(6,F,4,2,"li",35),i.qZA()()()),2&_){const l=i.oxw();i.xp6(6),i.Q6J("ngForOf",l.assignedUsers)}}function st(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"a",22),i.NdJ("click",function(){i.CHM(l);const f=i.oxw();return i.KtG(f.openCloseDescriptionForm())}),i._uU(1,"Edit"),i.qZA()}}function rt(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"div",38),i.NdJ("click",function(){i.CHM(l);const f=i.oxw();return i.KtG(!!f.isOwner&&f.openCloseDescriptionForm())}),i._UZ(1,"div",39),i.qZA()}if(2&_){const l=i.oxw();i.xp6(1),i.Q6J("innerHTML",l.selectedTask.text,i.oJD)}}function at(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"a",42),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(2);return i.KtG(!!f.isOwner&&(f.openDescriptionFormToggle=!0))}),i._uU(1,"Add a detailed description..."),i.qZA()}}function ut(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"form",43),i.NdJ("ngSubmit",function(){i.CHM(l);const f=i.oxw(2);return i.KtG(f.saveDescription())}),i.TgZ(1,"div",44),i._UZ(2,"ngx-editor-menu",45)(3,"ngx-editor",46,47),i.qZA(),i.TgZ(5,"div",48)(6,"button",49),i._uU(7," Save "),i.qZA(),i.TgZ(8,"button",50),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(2);return i.KtG(f.openCloseDescriptionForm())}),i._uU(9," Cancel "),i.qZA()()()}if(2&_){const l=i.oxw(2);i.xp6(2),i.Q6J("editor",l.editor)("toolbar",l.toolbar),i.xp6(1),i.Q6J("editor",l.editor)("formControl",l.description),i.xp6(3),i.Q6J("disabled",l.description.pristine||l.description.invalid)}}function lt(_,D){if(1&_&&(i.YNc(0,at,2,0,"a",40),i.YNc(1,ut,10,5,"ng-template",null,41,i.W1O)),2&_){const l=i.MAs(2),u=i.oxw();i.Q6J("ngIf",!u.openDescriptionFormToggle)("ngIfElse",l)}}const ct=function(){return{position:"absolute",right:"0px"}};function dt(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"emoji-mart",61),i.NdJ("emojiSelect",function(f){i.CHM(l);const k=i.oxw(3);return i.KtG(k.addEmoji(f))}),i.qZA()}2&_&&i.Q6J("ngStyle",i.DdM(1,ct))}function z(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"div",48)(1,"button",62),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(3);return i.KtG(f.addComment())}),i._uU(2," Send "),i.qZA(),i.TgZ(3,"button",50),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(3);return i.KtG(f.commentForm.reset())}),i._uU(4," Cancel "),i.qZA()()}if(2&_){const l=i.oxw(3);i.xp6(1),i.Q6J("disabled",!l.commentForm.value)}}function mt(_,D){if(1&_){const l=i.EpF();i.TgZ(0,"div",54)(1,"label",55),i._uU(2,"Add comment"),i.qZA(),i.TgZ(3,"div",56)(4,"textarea",57),i._uU(5,"      "),i.qZA(),i.TgZ(6,"button",58),i.NdJ("click",function(){i.CHM(l);const f=i.oxw(2);return i.KtG(f.isEmojiPicker=!f.isEmojiPicker)}),i._uU(7,"\u{1f600}"),i.qZA()(),i.YNc(8,dt,1,2,"emoji-mart",59),i.YNc(9,z,5,1,"div",60),i.qZA()}if(2&_){const l=i.oxw(2);i.xp6(4),i.Q6J("formControl",l.commentForm),i.xp6(4),i.Q6J("ngIf",l.isEmojiPicker),i.xp6(1),i.Q6J("ngIf",l.commentForm.value)}}function X(_,D){if(1&_&&(i.TgZ(0,"div")(1,"div",63)(2,"div",52),i._UZ(3,"div",64),i.TgZ(4,"div",65)(5,"div",66)(6,"p",67),i._uU(7),i.qZA()(),i.TgZ(8,"div",66)(9,"p",68),i._uU(10),i.ALo(11,"timeago"),i.qZA()()()()()()),2&_){const l=D.$implicit;i.xp6(3),i.Q6J("innerHTML",l.text,i.oJD),i.xp6(4),i.hij(" ",l.ownerName," "),i.xp6(3),i.hij(" ",i.lcZ(11,3,l.creationDate)," ")}}function ft(_,D){if(1&_&&(i.TgZ(0,"div",51)(1,"div",52),i.YNc(2,mt,10,3,"div",53),i.ALo(3,"async"),i.YNc(4,X,12,5,"div",35),i.qZA()()),2&_){const l=i.oxw();let u;i.xp6(2),i.Q6J("ngIf",(null==l.selectedTask||null==l.selectedTask.assignedUsers?null:l.selectedTask.assignedUsers.includes(null==(u=i.lcZ(3,2,l.currentUserService.currentUser$))?null:u.uid))||l.isOwner),i.xp6(2),i.Q6J("ngForOf",l.selectedTask.comments)}}let K=(()=>{class _{constructor(l,u,f,k,Ct,Z){this.asyncValidatorService=l,this.boardFirebaseService=u,this.afAuth=f,this.currentDataService=k,this.currentUserService=Ct,this.userFirebaseService=Z,this.isAssignFormOpen=!1,this.isEditable=!1,this.isEmojiPicker=!1,this.openDescriptionFormToggle=!1,this.assignedUsers=[],this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["text_color","background_color"]],this.description=new c.NI("",[c.kI.maxLength(512)]),this.commentForm=new c.NI("",[c.kI.maxLength(256)]),this.assigningTaskForm=new c.NI("",[c.kI.required],[this.asyncValidatorService.usernameExistValidator("invite")])}ngOnInit(){this.editor=new p.ML,this.afAuth.user.pipe((0,P.P)()).subscribe(l=>{l&&(this.username=l.displayName,this.uid=l.uid,this.isOwner=this.uid===this.currentBoard.ownerId)}),this.currentDataService._currentBoard.pipe((0,P.P)()).subscribe(l=>{this.currentBoard=l}),this.currentDataService._currentColumn.pipe((0,P.P)()).subscribe(l=>{this.selectedColumn=l}),this.currentDataService._currentTask.pipe((0,P.P)()).subscribe(l=>{this.selectedTask=l,this.selectedTask.assignedUsers?.map(u=>this.userFirebaseService.getUserDocById(u).pipe((0,P.P)()).subscribe(f=>this.assignedUsers.push(f.username))),this.description.setValue(l.text),this.initTaskName=this.selectedTask.name})}updateTaskName(){this.isEditable=!this.isEditable;const l=this.initTaskName!==this.selectedTask.name;this.isEditable?setTimeout(()=>this._taskInput.nativeElement.focus(),25):l&&(this.currentBoard.isPublic&&this.selectedTask.name?.length>=3?this.boardFirebaseService.updatePublicBoard(this.currentBoard.boardId,{columns:this.currentBoard.columns}):this.selectedTask.name?.length>=3?this.boardFirebaseService.updatePrivateBoard(this.uid,this.currentBoard.boardId,{columns:this.currentBoard.columns}):(alert("Names with less than 3 char didn't saving."),this.selectedTask.name=this.initTaskName))}openCloseDescriptionForm(){this.openDescriptionFormToggle=!this.openDescriptionFormToggle,this.description.reset(this.selectedTask?.text)}saveDescription(){this.selectedTask.text=this.description.value,this.currentBoard.isPublic?this.boardFirebaseService.updatePublicBoard(this.currentBoard.boardId,{columns:this.currentBoard.columns}):this.boardFirebaseService.updatePrivateBoard(this.uid,this.currentBoard.boardId,{columns:this.currentBoard.columns}),this.openCloseDescriptionForm()}addEmoji(l){this.commentForm.patchValue(`${this.commentForm.value}${l.emoji.native}`)}addComment(){this.selectedTask.comments?.unshift({ownerName:this.username,ownerId:this.uid,text:this.commentForm.value,creationDate:Date.now()}),this.boardFirebaseService.updatePublicBoard(this.currentBoard.boardId,{columns:this.currentBoard.columns}),this.commentForm.reset()}openCloseForm(){this.isAssignFormOpen=!this.isAssignFormOpen,this.assigningTaskForm.reset()}assignTask(){this.isAssignFormOpen=!this.isAssignFormOpen,this.assignedUsers?.push(this.assigningTaskForm.value),this.userFirebaseService.getUserWhere("username","==",this.assigningTaskForm.value).pipe((0,P.P)()).subscribe(l=>{this.selectedTask.assignedUsers?.push(l[0].uid),this.boardFirebaseService.updatePublicBoard(this.currentBoard.boardId,{columns:this.currentBoard.columns})})}deleteAssignedUser(l){this.assignedUsers.splice(l,1),this.selectedTask.assignedUsers?.splice(l,1),this.boardFirebaseService.updatePublicBoard(this.currentBoard.boardId,{columns:this.currentBoard.columns})}ngOnDestroy(){this.editor.destroy()}}return _.\u0275fac=function(l){return new(l||_)(i.Y36(w.n),i.Y36(C.U),i.Y36(m.zQ),i.Y36(T.R),i.Y36(J.S),i.Y36(W.e))},_.\u0275cmp=i.Xpm({type:_,selectors:[["app-task-modal"]],viewQuery:function(l,u){if(1&l&&i.Gf(gt,5),2&l){let f;i.iGM(f=i.CRH())&&(u._taskInput=f.first)}},decls:26,vars:11,consts:[[1,"window","position-relative"],["mat-button","","type","button",1,"modal-close-button","position-absolute","top-0","start-100","translate-middle",3,"mat-dialog-close"],["role","button",1,"icon-md","icon-close"],[1,"window__header"],[1,"window__header__title"],[3,"click",4,"ngIf"],["style","user-select: none","type","text","class","form-control shadow-none","maxlength","15",3,"ngModel","keydown.enter","ngModelChange",4,"ngIf"],["class","btn",3,"click",4,"ngIf","ngIfElse"],["assignForm",""],[1,"window__header__column-name"],[4,"ngIf"],[1,"window__content"],[1,"window__content__title"],[1,"title"],["class","btn",3,"click",4,"ngIf"],[1,"window__content__description"],["class","task-description",3,"click",4,"ngIf","ngIfElse"],["descriptionForm",""],["class","comment-section card shadow-0 border","style","background-color: #f0f2f5",4,"ngIf"],[3,"click"],["type","text","maxlength","15",1,"form-control","shadow-none",2,"user-select","none",3,"ngModel","keydown.enter","ngModelChange"],["taskInput",""],[1,"btn",3,"click"],["class","assign-form",4,"ngIf"],[1,"assign-form"],[1,"input-group"],["placeholder","username",1,"form-control","shadow-none",3,"formControl"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","plus",4,"ngIf"],["class","spinner-border spinner-border-sm",4,"ngIf"],["mat-button","","type","button",1,"close-button",3,"click"],[1,"close-icon"],[1,"plus"],[1,"spinner-border","spinner-border-sm"],[1,"users-list"],[4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],[1,"task-description",3,"click"],[1,"window__content__description__add-content",3,"innerHTML"],["class","window__content__description__add-content","style","color: #5e6c84",3,"click",4,"ngIf","ngIfElse"],["form",""],[1,"window__content__description__add-content",2,"color","#5e6c84",3,"click"],[1,"window__content__description__edit-container",3,"ngSubmit"],[1,"NgxEditor__Wrapper"],[3,"editor","toolbar"],[3,"editor","formControl"],["textArea",""],[1,"form-buttons"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["type","button","mat-raised-button","",3,"click"],[1,"comment-section","card","shadow-0","border",2,"background-color","#f0f2f5"],[1,"card-body"],["class","form-outline mb-2","style","background-color: #f0f2f5",4,"ngIf"],[1,"form-outline","mb-2",2,"background-color","#f0f2f5"],[1,"form-label"],[1,"comment-section__input"],["type","string","rows","3","cdkTextareaAutosize","","placeholder","Type comment...","aria-label","Type comment...",1,"form-control","shadow-none",3,"formControl"],[1,"comment-section__emotes-btn",3,"click"],["title","Pick your emoji\u2026","emoji","point_up",3,"ngStyle","emojiSelect",4,"ngIf"],["class","form-buttons",4,"ngIf"],["title","Pick your emoji\u2026","emoji","point_up",3,"ngStyle","emojiSelect"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],[1,"card","mb-4"],[3,"innerHTML"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-row","align-items-center"],[1,"small","mb-0","ms-2"],[1,"small","text-muted","mb-0",2,"margin-right","11px"]],template:function(l,u){if(1&l&&(i.TgZ(0,"div",0)(1,"button",1)(2,"mat-icon",2),i._uU(3,"close"),i.qZA()(),i.TgZ(4,"div",3)(5,"div",4),i.YNc(6,et,2,1,"h2",5),i.TgZ(7,"div"),i.YNc(8,j,2,1,"input",6),i.qZA(),i.YNc(9,A,2,0,"a",7),i.YNc(10,$,1,1,"ng-template",null,8,i.W1O),i.qZA(),i.TgZ(12,"div",9)(13,"p"),i._uU(14),i.qZA(),i.YNc(15,ot,7,1,"mat-accordion",10),i.qZA()(),i.TgZ(16,"div",11)(17,"div",12)(18,"h5",13),i._uU(19,"Description"),i.qZA(),i.YNc(20,st,2,0,"a",14),i.qZA(),i.TgZ(21,"div",15),i.YNc(22,rt,2,1,"div",16),i.YNc(23,lt,3,2,"ng-template",null,17,i.W1O),i.qZA()(),i.YNc(25,ft,5,4,"div",18),i.qZA()),2&l){const f=i.MAs(11),k=i.MAs(24);i.xp6(1),i.Q6J("mat-dialog-close",!0),i.xp6(5),i.Q6J("ngIf",!u.isEditable),i.xp6(2),i.Q6J("ngIf",u.isEditable),i.xp6(1),i.Q6J("ngIf",u.isOwner&&!u.isAssignFormOpen)("ngIfElse",f),i.xp6(5),i.hij("list: ",u.selectedColumn.name,""),i.xp6(1),i.Q6J("ngIf",null==u.selectedTask||null==u.selectedTask.assignedUsers?null:u.selectedTask.assignedUsers.length),i.xp6(5),i.Q6J("ngIf",u.isOwner),i.xp6(2),i.Q6J("ngIf",!u.openDescriptionFormToggle&&(null==u.selectedTask?null:u.selectedTask.text))("ngIfElse",k),i.xp6(3),i.Q6J("ngIf",(null==u.selectedTask.comments?null:u.selectedTask.comments.length)>0||u.isOwner&&(null==u.currentBoard?null:u.currentBoard.isPublic))}},dependencies:[M.sg,M.O5,M.PC,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.On,c.F,R.ZT,c.oH,E.IC,O.TO,L.lW,V.Hw,U.pp,U.ib,U.yz,U.yK,p.tP,p.Mn,tt.qP,M.Ov,ht.wr],styles:[".cdk-global-overlay-wrapper ::-webkit-scrollbar{width:5px;overflow-y:scroll;background:darkgrey;box-shadow:inset 0 0 4px #707070}  .cdk-global-overlay-wrapper ::-webkit-scrollbar-thumb{background:#3f51b5;border-radius:10px}@keyframes formButtonsFadein{0%{opacity:0;margin-top:.3rem}to{opacity:1;margin-top:1rem}}.window[_ngcontent-%COMP%]   ngx-letters-avatar[_ngcontent-%COMP%]     img{padding:3px!important}.window[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;animation-name:formButtonsFadein;animation-duration:.5s;animation-fill-mode:forwards;gap:1rem}.window[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}.window[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:unset;margin-top:1.5rem}.window[_ngcontent-%COMP%]   .modal-close-button[_ngcontent-%COMP%]{padding:0;min-width:22px;min-height:22px;height:22px;margin:-11px 11px;border-radius:50%}.window[_ngcontent-%COMP%]   .modal-close-button[_ngcontent-%COMP%]     .mat-button-wrapper>*{vertical-align:sub!important;line-height:17px}.window[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{position:absolute;line-height:0px;padding-left:5px;font-size:12px;z-index:5}.window[_ngcontent-%COMP%]   .comment-section__input[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .comment-section__input[_ngcontent-%COMP%]   .form-outline[_ngcontent-%COMP%]{position:relative}.window[_ngcontent-%COMP%]   .comment-section__input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;border:0;background:transparent}.window[_ngcontent-%COMP%]   .window__content__title[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:2px;height:36px}.window[_ngcontent-%COMP%]   .window__content__title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.window[_ngcontent-%COMP%]   .window__content__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;text-decoration:none;font-size:13px;font-weight:500;color:#000;cursor:pointer;width:90px;height:24px;text-align:center;background-color:#5e6c841a;padding:4px 8px;margin-left:8px;border-radius:3px;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.window[_ngcontent-%COMP%]   .window__content__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f5f5f5;background-color:#5e6c84;border-radius:3px}.window[_ngcontent-%COMP%]   .window__content__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{background-color:#5e6c8499}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;position:relative}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]{position:absolute;right:0}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 12px;height:30px}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;min-width:36px;padding:0}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:0;padding:0}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;background-color:#ebecf0;margin-bottom:2px;padding-left:6px}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;height:20px}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .assign-form[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:auto}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .assign-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;min-width:36px}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .assign-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:22px}.window[_ngcontent-%COMP%]   .window__content[_ngcontent-%COMP%]   .window__content__title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:4px 0;margin:0}.window__content__description[_ngcontent-%COMP%]   .task-description[_ngcontent-%COMP%]{display:flex;flex-direction:column}.window__content__description[_ngcontent-%COMP%]   .window__content__description__add-content[_ngcontent-%COMP%]{display:block;box-sizing:content-box;min-height:108px;color:#000;margin-top:1rem;padding:.375rem .75rem;background-color:#5e6c841a;cursor:pointer;text-decoration:none;border-radius:3px;box-shadow:0 1px #091e4240}.window__content__description[_ngcontent-%COMP%]   .window__content__description__add-content[_ngcontent-%COMP%]:hover{background-color:#ebecf0;border-radius:3px}.window__content__description[_ngcontent-%COMP%]   .window__content__description__edit-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:1rem}@media screen and (max-width: 550px){.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{height:30px!important;padding:0 4px!important}.mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{margin-right:6px}}@media screen and (max-width: 390px){.window[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:14px}.window[_ngcontent-%COMP%]     .mat-expansion-indicator:after{padding:2px!important}.window[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{font-size:12px;height:20px!important}.window[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:24px!important}.window[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{font-size:9px!important}.window[_ngcontent-%COMP%]   .window__header__column-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__content[_ngcontent-%COMP%]{gap:5px}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;padding:4px 0!important}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:64px!important;font-size:10px;padding:0}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__content[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]{gap:3px}.window[_ngcontent-%COMP%]   .window__header__title[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .window[_ngcontent-%COMP%]   .window__content[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:32px;padding:0}}"]}),_})()},1206:(Y,I,h)=>{h.d(I,{Zt:()=>Kt,Wj:()=>Nt,Fd:()=>Zt,_t:()=>Gt,bA:()=>f,EA:()=>k});var c=h(4650),P=h(6895),p=h(4883),i=h(3353),w=h(1281),C=h(2693),m=h(7579),T=h(727),J=h(4986),W=h(5963),R=h(6406),E=h(9751),O=h(6451),L=h(2722),V=h(8675),U=h(4004),tt=h(5698),ht=h(8505),gt=h(3900),et=h(445);function j(r,e,t){for(let n in e)if(e.hasOwnProperty(n)){const o=e[n];o?r.setProperty(n,o,t?.has(n)?"important":""):r.removeProperty(n)}return r}function A(r,e){const t=e?"":"none";j(r.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function it(r,e,t){j(r.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function H(r,e){return e&&"none"!=e?r+" "+e:r}function nt(r){const e=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*e}function Q(r,e){return r.getPropertyValue(e).split(",").map(n=>n.trim())}function $(r){const e=r.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function q(r,e,t){const{top:n,bottom:o,left:s,right:a}=r;return t>=n&&t<=o&&e>=s&&e<=a}function F(r,e,t){r.top+=e,r.bottom=r.top+r.height,r.left+=t,r.right=r.left+r.width}function ot(r,e,t,n){const{top:o,right:s,bottom:a,left:d,width:g,height:v}=r,b=g*e,x=v*e;return n>o-x&&n<a+x&&t>d-b&&t<s+b}class st{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:$(t)})})}handleScroll(e){const t=(0,i.sA)(e),n=this.positions.get(t);if(!n)return null;const o=n.scrollPosition;let s,a;if(t===this._document){const v=this.getViewportScrollPosition();s=v.top,a=v.left}else s=t.scrollTop,a=t.scrollLeft;const d=o.top-s,g=o.left-a;return this.positions.forEach((v,b)=>{v.clientRect&&t!==b&&t.contains(b)&&F(v.clientRect,d,g)}),o.top=s,o.left=a,{top:d,left:g}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function rt(r){const e=r.cloneNode(!0),t=e.querySelectorAll("[id]"),n=r.nodeName.toLowerCase();e.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return"canvas"===n?ct(r,e):("input"===n||"select"===n||"textarea"===n)&&lt(r,e),at("canvas",r,e,ct),at("input, textarea, select",r,e,lt),e}function at(r,e,t,n){const o=e.querySelectorAll(r);if(o.length){const s=t.querySelectorAll(r);for(let a=0;a<o.length;a++)n(o[a],s[a])}}let ut=0;function lt(r,e){"file"!==e.type&&(e.value=r.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${ut++}`)}function ct(r,e){const t=e.getContext("2d");if(t)try{t.drawImage(r,0,0)}catch{}}const dt=(0,i.i$)({passive:!0}),z=(0,i.i$)({passive:!1}),X=new Set(["position"]);class ft{constructor(e,t,n,o,s,a){this._config=t,this._document=n,this._ngZone=o,this._viewportRuler=s,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new m.x,this._pointerMoveSubscription=T.w0.EMPTY,this._pointerUpSubscription=T.w0.EMPTY,this._scrollSubscription=T.w0.EMPTY,this._resizeSubscription=T.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new m.x,this.started=new m.x,this.released=new m.x,this.ended=new m.x,this.entered=new m.x,this.exited=new m.x,this.dropped=new m.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const g=this._getTargetHandle(d);g&&!this._disabledHandles.has(g)&&!this.disabled&&this._initializeDragSequence(g,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const g=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(g.x-this._pickupPositionOnPage.x)+Math.abs(g.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const B=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),N=this._dropContainer;if(!B)return void this._endDragSequence(d);(!N||!N.isDragging()&&!N.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const v=this._getConstrainedPointerPosition(g);if(this._hasMoved=!0,this._lastKnownPointerPosition=g,this._updatePointerDirectionDelta(v),this._dropContainer)this._updateActiveDropContainer(v,g);else{const b=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,x=this._activeTransform;x.x=v.x-b.x+this._passiveTransform.x,x.y=v.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(x.x,x.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:v,event:d,distance:this._getDragDistance(v),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const g=this._getTargetHandle(d);g&&!this._disabledHandles.has(g)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new st(n),a.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=(0,w.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>A(n,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(n=>(0,w.fI)(n)),this._handles.forEach(n=>A(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=(0,w.fI)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,z),t.addEventListener("touchstart",this._pointerDown,dt),t.addEventListener("dragstart",this._nativeDragStart,z)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?(0,w.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),A(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),A(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){D(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,o=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();o.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),it(n,!1,X),this._document.body.appendChild(o.replaceChild(s,n)),this._getPreviewInsertionPoint(o,d).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),o=D(t),s=!o&&0!==t.button,a=this._rootElement,d=(0,i.sA)(t),g=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),v=o?(0,C.yG)(t):(0,C.X6)(t);if(d&&d.draggable&&"mousedown"===t.type&&t.preventDefault(),n||s||g||v)return;if(this._handles.length){const y=a.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=$(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const x=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:x.x,y:x.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){it(this._rootElement,!0,X),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),o=this._getPointerPositionOnPage(e),s=this._getDragDistance(o),a=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:s,dropPoint:o,event:e}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:s,dropPoint:o,event:e}),t.drop(this,n,this._initialIndex,this._initialContainer,a,s,o,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:o}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,n=e?e.template:null;let o;if(n&&e){const s=e.matchSize?this._initialClientRect:null,a=e.viewContainer.createEmbeddedView(n,e.context);a.detectChanges(),o=l(a,this._document),this._previewRef=a,e.matchSize?u(o,s):o.style.transform=K(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=rt(this._rootElement),u(o,this._initialClientRect),this._initialTransform&&(o.style.transform=this._initialTransform);return j(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},X),A(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>o.classList.add(s)):o.classList.add(t)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function pt(r){const e=getComputedStyle(r),t=Q(e,"transition-property"),n=t.find(d=>"transform"===d||"all"===d);if(!n)return 0;const o=t.indexOf(n),s=Q(e,"transition-duration"),a=Q(e,"transition-delay");return nt(s[o])+nt(a[o])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const o=a=>{(!a||(0,i.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",o),n(),clearTimeout(s))},s=setTimeout(o,1.5*t);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=l(this._placeholderRef,this._document)):n=rt(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t,n){const o=t===this._rootElement?null:t,s=o?o.getBoundingClientRect():e,a=D(n)?n.targetTouches[0]:n,d=this._getViewportScrollPosition();return{x:s.left-e.left+(a.pageX-s.left-d.left),y:s.top-e.top+(a.pageY-s.top-d.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),n=D(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,o=n.pageX-t.left,s=n.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const d=this._ownerSVGElement.createSVGPoint();return d.x=o,d.y=s,d.matrixTransform(a.inverse())}}return{x:o,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:o}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:a}=this._pickupPositionInElement,d=this._boundaryRect,{width:g,height:v}=this._getPreviewRect(),b=d.top+a,x=d.bottom-(v-a);n=_(n,d.left+s,d.right-(g-s)),o=_(o,b,x)}return{x:n,y:o}}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,o=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-s.x),d=Math.abs(n-s.y);return a>this._config.pointerDirectionChangeThreshold&&(o.x=t>s.x?1:-1,s.x=t),d>this._config.pointerDirectionChangeThreshold&&(o.y=n>s.y?1:-1,s.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,A(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,z),e.removeEventListener("touchstart",this._pointerDown,dt),e.removeEventListener("dragstart",this._nativeDragStart,z)}_applyRootElementTransform(e,t){const n=K(e,t),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=H(n,this._initialTransform)}_applyPreviewTransform(e,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,o=K(e,t);this._preview.style.transform=H(o,n)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(0===o.width&&0===o.height||0===n.width&&0===n.height)return;const s=o.left-n.left,a=n.right-o.right,d=o.top-n.top,g=n.bottom-o.bottom;o.width>n.width?(s>0&&(e+=s),a>0&&(e-=a)):e=0,o.height>n.height?(d>0&&(t+=d),g>0&&(t-=g)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:D(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const n=(0,i.sA)(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&F(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,i.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){const o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return(0,w.fI)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function K(r,e){return`translate3d(${Math.round(r)}px, ${Math.round(e)}px, 0)`}function _(r,e,t){return Math.max(e,Math.min(t,r))}function D(r){return"t"===r.type[0]}function l(r,e){const t=r.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const n=e.createElement("div");return t.forEach(o=>n.appendChild(o)),n}function u(r,e){r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.style.transform=K(e.left,e.top)}function f(r,e,t){const n=Z(e,r.length-1),o=Z(t,r.length-1);if(n===o)return;const s=r[n],a=o<n?-1:1;for(let d=n;d!==o;d+=a)r[d]=r[d+a];r[o]=s}function k(r,e,t,n){const o=Z(t,r.length-1),s=Z(n,e.length);r.length&&e.splice(s,0,r.splice(o,1)[0])}function Z(r,e){return Math.max(0,Math.min(e,r))}class kt{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,n,o){const s=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,n,o);if(-1===a&&s.length>0)return null;const d="horizontal"===this.orientation,g=s.findIndex(S=>S.drag===e),v=s[a],x=v.clientRect,y=g>a?1:-1,B=this._getItemOffsetPx(s[g].clientRect,x,y),N=this._getSiblingOffsetPx(g,s,y),G=s.slice();return f(s,g,a),s.forEach((S,Yt)=>{if(G[Yt]===S)return;const St=S.drag===e,wt=St?B:N,It=St?e.getPlaceholderElement():S.drag.getRootElement();S.offset+=wt,d?(It.style.transform=H(`translate3d(${Math.round(S.offset)}px, 0, 0)`,S.initialTransform),F(S.clientRect,0,wt)):(It.style.transform=H(`translate3d(0, ${Math.round(S.offset)}px, 0)`,S.initialTransform),F(S.clientRect,wt,0))}),this._previousSwap.overlaps=q(x,t,n),this._previousSwap.drag=v.drag,this._previousSwap.delta=d?o.x:o.y,{previousIndex:g,currentIndex:a}}enter(e,t,n,o){const s=null==o||o<0?this._getItemIndexFromPointerPosition(e,t,n):o,a=this._activeDraggables,d=a.indexOf(e),g=e.getPlaceholderElement();let v=a[s];if(v===e&&(v=a[s+1]),!v&&(null==s||-1===s||s<a.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(v=a[0]),d>-1&&a.splice(d,1),v&&!this._dragDropRegistry.isDragging(v)){const b=v.getRootElement();b.parentElement.insertBefore(g,b),a.splice(s,0,e)}else(0,w.fI)(this._element).appendChild(g),a.push(e);g.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const n=this._itemPositions.find(o=>o.drag===e)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:n})=>{F(n,e,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:$(n)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(e,t,n){const o="horizontal"===this.orientation;let s=o?t.left-e.left:t.top-e.top;return-1===n&&(s+=o?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,n){const o="horizontal"===this.orientation,s=t[e].clientRect,a=t[e+-1*n];let d=s[o?"width":"height"]*n;if(a){const g=o?"left":"top",v=o?"right":"bottom";-1===n?d-=a.clientRect[g]-s[v]:d+=s[g]-a.clientRect[v]}return d}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,o="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return o?e>=a.right:t>=a.bottom}{const a=n[0].clientRect;return o?e<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(e,t,n,o){const s="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:d,clientRect:g})=>{if(d===e)return!1;if(o){const v=s?o.x:o.y;if(d===this._previousSwap.drag&&this._previousSwap.overlaps&&v===this._previousSwap.delta)return!1}return s?t>=Math.floor(g.left)&&t<Math.floor(g.right):n>=Math.floor(g.top)&&n<Math.floor(g.bottom)});return-1!==a&&this._sortPredicate(a,e)?a:-1}}class Rt{constructor(e,t,n,o,s){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new m.x,this.entered=new m.x,this.exited=new m.x,this.dropped=new m.x,this.sorted=new m.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=T.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new m.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function M(r=0,e=J.z){return r<0&&(r=0),(0,W.H)(r,r,e)}(0,R.Z).pipe((0,L.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-d):2===this._verticalScrollDirection&&a.scrollBy(0,d),1===this._horizontalScrollDirection?a.scrollBy(-d,0):2===this._horizontalScrollDirection&&a.scrollBy(d,0)})},this.element=(0,w.fI)(e),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new st(n),this._sortStrategy=new kt(this.element,t),this._sortStrategy.withSortPredicate((a,d)=>this.sortPredicate(a,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,o){this._draggingStarted(),null==o&&this.sortingDisabled&&(o=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,o,s,a,d,g={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:s,distance:a,dropPoint:d,event:g})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>-1===e.indexOf(o))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=(0,w.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,o){if(this.sortingDisabled||!this._clientRect||!ot(this._clientRect,.05,t,n))return;const s=this._sortStrategy.sort(e,t,n,o);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,o=0,s=0;if(this._parentPositions.positions.forEach((a,d)=>{d===this._document||!a.clientRect||n||ot(a.clientRect,.05,e,t)&&([o,s]=function At(r,e,t,n){const o=xt(e,n),s=Tt(e,t);let a=0,d=0;if(o){const g=r.scrollTop;1===o?g>0&&(a=1):r.scrollHeight-g>r.clientHeight&&(a=2)}if(s){const g=r.scrollLeft;1===s?g>0&&(d=1):r.scrollWidth-g>r.clientWidth&&(d=2)}return[a,d]}(d,a.clientRect,e,t),(o||s)&&(n=d))}),!o&&!s){const{width:a,height:d}=this._viewportRuler.getViewportSize(),g={width:a,height:d,top:0,right:a,bottom:d,left:0};o=xt(g,t),s=Tt(g,e),n=window}n&&(o!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=s,this._scrollNode=n,(o||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=(0,w.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=(0,w.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=(0,w.fI)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&q(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(o=>o._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._clientRect||!q(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;const o=this._getShadowRoot().elementFromPoint(t,n);if(!o)return!1;const s=(0,w.fI)(this.element);return o===s||s.contains(o)}_startReceiving(e,t){const n=this._activeSiblings;!n.has(e)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=(0,i.kV)((0,w.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function xt(r,e){const{top:t,bottom:n,height:o}=r,s=.05*o;return e>=t-s&&e<=t+s?1:e>=n-s&&e<=n+s?2:0}function Tt(r,e){const{left:t,right:n,width:o}=r,s=.05*o;return e>=t-s&&e<=t+s?1:e>=n-s&&e<=n+s?2:0}const _t=(0,i.i$)({passive:!1,capture:!0});let Lt=(()=>{class r{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new m.x,this.pointerUp=new m.x,this.scroll=new m.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,_t)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,_t)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:_t}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:_t}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new E.y(o=>this._ngZone.runOutsideAngular(()=>{const a=d=>{this._activeDragInstances.length&&o.next(d)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),(0,O.T)(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(c.R0b),c.LFG(P.K0))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Ft={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let vt=(()=>{class r{constructor(t,n,o,s){this._document=t,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(t,n=Ft){return new ft(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new Rt(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(P.K0),c.LFG(c.R0b),c.LFG(p.rL),c.LFG(Lt))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Mt=new c.OlP("CDK_DRAG_PARENT"),Pt=new c.OlP("CdkDropListGroup");let Zt=(()=>{class r{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,w.Ig)(t)}ngOnDestroy(){this._items.clear()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=c.lG2({type:r,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[c._Bn([{provide:Pt,useExisting:r}])]}),r})();const Ot=new c.OlP("CDK_DRAG_CONFIG");let Bt=0;const Et=new c.OlP("CdkDropList");let Nt=(()=>{class r{constructor(t,n,o,s,a,d,g){this.element=t,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=a,this._group=d,this._destroyed=new m.x,this.connectedTo=[],this.id="cdk-drop-list-"+Bt++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new c.vpe,this.entered=new c.vpe,this.exited=new c.vpe,this.sorted=new c.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,g&&this._assignDefaults(g),this._dropListRef.enterPredicate=(v,b)=>this.enterPredicate(v.data,b.data),this._dropListRef.sortPredicate=(v,b,x)=>this.sortPredicate(v,b.data,x.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),d&&d._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,w.Ig)(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,n)=>t._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=r._dropLists.indexOf(this);t>-1&&r._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,V.O)(this._dir.value),(0,L.R)(this._destroyed)).subscribe(n=>t.withDirection(n)),t.beforeStarted.subscribe(()=>{const n=(0,w.Eq)(this.connectedTo).map(o=>"string"==typeof o?r._dropLists.find(a=>a.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===n.indexOf(o)&&n.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,w.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,w.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,w.su)(this.autoScrollStep,2),t.connectedTo(n.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:n,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:d}=t;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=d||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return r._dropLists=[],r.\u0275fac=function(t){return new(t||r)(c.Y36(c.SBq),c.Y36(vt),c.Y36(c.sBO),c.Y36(p.mF),c.Y36(et.Is,8),c.Y36(Pt,12),c.Y36(Ot,8))},r.\u0275dir=c.lG2({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){2&t&&(c.uIk("id",n.id),c.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[c._Bn([{provide:Pt,useValue:void 0},{provide:Et,useExisting:r}])]}),r})();const yt=new c.OlP("CdkDragHandle"),Ut=new c.OlP("CdkDragPlaceholder"),Ht=new c.OlP("CdkDragPreview");let Kt=(()=>{class r{constructor(t,n,o,s,a,d,g,v,b,x,y){this.element=t,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=a,this._dir=g,this._changeDetectorRef=b,this._selfHandle=x,this._parentDrag=y,this._destroyed=new m.x,this.started=new c.vpe,this.released=new c.vpe,this.ended=new c.vpe,this.entered=new c.vpe,this.exited=new c.vpe,this.dropped=new c.vpe,this.moved=new E.y(B=>{const N=this._dragRef.moved.pipe((0,U.U)(G=>({source:this,pointerPosition:G.pointerPosition,event:G.event,delta:G.delta,distance:G.distance}))).subscribe(B);return()=>{N.unsubscribe()}}),this._dragRef=v.createDrag(t,{dragStartThreshold:d&&null!=d.dragStartThreshold?d.dragStartThreshold:5,pointerDirectionChangeThreshold:d&&null!=d.pointerDirectionChangeThreshold?d.pointerDirectionChangeThreshold:5,zIndex:d?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),d&&this._assignDefaults(d),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,w.Ig)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,tt.q)(1),(0,L.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,o=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=r._dragInstances.indexOf(this);t>-1&&r._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,w.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof o&&o?o:(0,w.su)(o),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe((0,tt.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(r._dragInstances.find(o=>o.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:o,constrainPosition:s,previewClass:a,boundaryElement:d,draggingDisabled:g,rootElementSelector:v,previewContainer:b}=t;this.disabled=g??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),s&&(this.constrainPosition=s),a&&(this.previewClass=a),d&&(this.boundaryElement=d),v&&(this.rootElementSelector=v),b&&(this.previewContainer=b)}_setupHandlesListener(){this._handles.changes.pipe((0,V.O)(this._handles),(0,ht.b)(t=>{const n=t.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,gt.w)(t=>(0,O.T)(...t.map(n=>n._stateChanges.pipe((0,V.O)(n))))),(0,L.R)(this._destroyed)).subscribe(t=>{const n=this._dragRef,o=t.element.nativeElement;t.disabled?n.disableHandle(o):n.enableHandle(o)})}}return r._dragInstances=[],r.\u0275fac=function(t){return new(t||r)(c.Y36(c.SBq),c.Y36(Et,12),c.Y36(P.K0),c.Y36(c.R0b),c.Y36(c.s_b),c.Y36(Ot,8),c.Y36(et.Is,8),c.Y36(vt),c.Y36(c.sBO),c.Y36(yt,10),c.Y36(Mt,12))},r.\u0275dir=c.lG2({type:r,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,o){if(1&t&&(c.Suo(o,Ht,5),c.Suo(o,Ut,5),c.Suo(o,yt,5)),2&t){let s;c.iGM(s=c.CRH())&&(n._previewTemplate=s.first),c.iGM(s=c.CRH())&&(n._placeholderTemplate=s.first),c.iGM(s=c.CRH())&&(n._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&c.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[c._Bn([{provide:Mt,useExisting:r}]),c.TTD]}),r})(),Gt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[vt],imports:[p.ZD]}),r})()}}]);